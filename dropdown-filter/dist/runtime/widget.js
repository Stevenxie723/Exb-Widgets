System.register(["jimu-core","jimu-core/react","jimu-ui"],(function(e,t){var n={},o={},i={};return{setters:[function(e){n.DataSourceComponent=e.DataSourceComponent,n.DataSourceManager=e.DataSourceManager,n.React=e.React,n.classNames=e.classNames,n.css=e.css,n.jsx=e.jsx},function(e){o.useCallback=e.useCallback,o.useEffect=e.useEffect,o.useState=e.useState},function(e){i.Dropdown=e.Dropdown,i.DropdownButton=e.DropdownButton,i.DropdownItem=e.DropdownItem,i.DropdownMenu=e.DropdownMenu}],execute:function(){e((()=>{var e={8996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},9244:e=>{"use strict";e.exports=n},8972:e=>{"use strict";e.exports=o},4321:e=>{"use strict";e.exports=i}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var a={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(a),r.d(a,{__set_webpack_public_path__:()=>x,default:()=>m});var e=r(9244),t=r(8972),n=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function s(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))};class o{constructor(e){this.delay=e,this.timeoutId=null}execute(e){return n(this,void 0,void 0,(function*(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>n(this,void 0,void 0,(function*(){try{yield e()}catch(e){console.error("Error in debounced function:",e)}this.timeoutId=null}))),this.delay)}))}}const i=({useDataSources:n,children:i,onDataSourceInfoChange:r,onDataSourceStatusChange:a,onDataSourceCreated:s,useDebounceExecutor:l})=>{const[c]=(0,t.useState)(new o(300)),u=(0,t.useCallback)(((e,t)=>{l||void 0===l?c.execute((()=>{null==r||r(e,t)})):null==r||r(e,t)}),[l,c,r]),d=(0,t.useCallback)(((e,t)=>{l||void 0===l?c.execute((()=>{null==a||a(e,t)})):null==a||a(e,t)}),[l,c,a]),f=(0,t.useCallback)((()=>{let t=i;for(let o=0;o<n.length;o++)t=(0,e.jsx)(e.DataSourceComponent,{useDataSource:n[o],onDataSourceInfoChange:u,onDataSourceStatusChange:d,onDataSourceCreated:s},t);return t}),[i,n,u,d,s]),[p,g]=(0,t.useState)(null);return(0,t.useEffect)((()=>{n&&n.length>0?g(f()):g(i)}),[i,f,n]),p};var s=r(4321),l=r(8996),c=r.n(l),u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n};const d=t=>{const n=window.SVG,{className:o}=t,i=u(t,["className"]),r=(0,e.classNames)("jimu-icon jimu-icon-component",o);return n?e.React.createElement(n,Object.assign({className:r,src:c()},i)):e.React.createElement("svg",Object.assign({className:r},i))};const f=e=>{const n=((e=200)=>{const[n,o]=(0,t.useState)({width:window.innerWidth,height:window.innerHeight});return(0,t.useEffect)((()=>{let t;const n=()=>{clearTimeout(t),t=setTimeout((()=>{o({width:window.innerWidth,height:window.innerHeight})}),e)};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),clearTimeout(t)}}),[e]),n})(),o=(0,t.useCallback)((e=>{let t=0,o="px";return"string"==typeof e&&e.endsWith("vw")?(t=parseFloat(e.substring(0,e.length-2)),o="vw"):"string"==typeof e&&e.endsWith("px")?(t=parseFloat(e.substring(0,e.length-2)),o="px"):t=0,"vw"===o?(i=t,r=n.width,i/100*r):t;var i,r}),[n.width]),[i,r]=(0,t.useState)(o(e));return(0,t.useEffect)((()=>{r(o(e))}),[e,o]),i},p=(e,t,n)=>e.split(t).join(n),g=t=>{const{fontSize:n,fontFamily:o,color:i,bold:r,italic:a,underline:s,strike:l}=t;return e.css`
    font-size: ${n};
    font-family: ${o};
    color: ${i};
    font-weight: ${r?"bold":"normal"};
    font-style: ${a?"italic":"normal"};
    text-decoration-line: ${s&&l?"underline line-through":s?"underline":l?"line-through":"none"};
    padding: 0;
  `},h=({h1:t,h2:n,iconUrl:o,height:i,paddingVertical:r,textDirectionHorizontal:a})=>{var s,l;const c=f(null!==(s=null==t?void 0:t.fontSize)&&void 0!==s?s:"0px"),u=f(null!==(l=null==n?void 0:n.fontSize)&&void 0!==l?l:"0px");return(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row",height:i,width:"100%",boxSizing:"border-box",borderWidth:"5px"}},(0,e.jsx)("div",{style:{height:"100%",alignItems:"center",justifyContent:"center",display:"flex",flexShrink:0}},o?(0,e.jsx)("img",{src:o,style:{backgroundColor:"transparent",display:"flex",objectFit:"contain"},height:c+u,width:c+u}):(0,e.jsx)(d,{size:"20"})),(0,e.jsx)("div",{style:{display:"flex",flexBasis:"100%",flexShrink:1,height:"100%",alignItems:a?"center":"flex-start",justifyContent:"space-between",flexDirection:a?"row":"column",gap:"5%",paddingTop:r,paddingBottom:r}},(0,e.jsx)("div",{css:t?g(t):{},style:{backgroundColor:"transparent",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",flexWrap:"wrap"}},null==t?void 0:t.content),(0,e.jsx)("div",{css:n?g(n):{},style:{backgroundColor:"transparent",alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column",flexWrap:"wrap"}},null==n?void 0:n.content)))};function m(n){var o;const[r,a]=(0,t.useState)(-1),[,l]=(0,t.useState)(""),c=(0,t.useCallback)((t=>{if(!n.useDataSources||0===n.useDataSources.length||void 0===n.config.fieldNames||void 0===n.config.options)return;if(n.useDataSources.length!==n.config.fieldNames.length)return;if(void 0===n.config.options[t])return;const o=n.config.options[t].sqlExpression;for(let t=0;t<n.useDataSources.length;t++){const i=e.DataSourceManager.getInstance().getDataSource(n.useDataSources[t].dataSourceId);if(null==i||void 0===n.config.fieldNames[t])continue;let r=p(o,"{}",n.config.fieldNames[t]);r=p(r,"{idx}",t.toString());const a={where:r};i.updateQueryParams(a,n.id)}}),[n.config.fieldNames,n.config.options,n.id,n.useDataSources]),u=(0,t.useCallback)((e=>{!n.config.options||e<0||e>=n.config.options.length||a((t=>(t!==e&&c(e),l((t=>t+`, ${e}`)),e)))}),[c,n.config.options]);return(0,e.jsx)("div",{style:{alignItems:"center",display:"flex",justifyContent:"center",width:"100%",height:"100%",backgroundColor:"transparent",flexDirection:"column"}},(0,e.jsx)(i,{useDataSources:n.useDataSources,onDataSourceCreated:()=>{u(0)}},(0,e.jsx)(s.Dropdown,{fluid:!0,style:{height:"100%",display:"flex",alignItems:"center",margin:"0px"}},(0,e.jsx)(s.DropdownButton,{arrow:!1},(0,e.jsx)(h,{h1:n.config.h1,h2:Object.assign(Object.assign({},n.config.h2),{content:!n.config.options||n.config.options.length<=r||r<0?"":n.config.options[r].displayName}),iconUrl:n.config.iconUrl,height:n.config.height,paddingVertical:n.config.paddingVertical,textDirectionHorizontal:n.config.textDirectionHorizontal})),(0,e.jsx)(s.DropdownMenu,null,null===(o=n.config.options)||void 0===o?void 0:o.map(((t,n)=>(0,e.jsx)(s.DropdownItem,{key:n,value:n,onClick:()=>{u(n)}},(0,e.jsx)("div",{style:{display:"flex",width:"100%",alignItems:"center"}},t.displayName))))))))}function x(e){r.p=e}})(),a})())}}}));