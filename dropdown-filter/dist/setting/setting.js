System.register(["jimu-core","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/setting-components","jimu-core/react","jimu-ui"],(function(e,t){var o={},n={},i={},s={},a={};return{setters:[function(e){o.AllDataSourceTypes=e.AllDataSourceTypes,o.Immutable=e.Immutable,o.jsx=e.jsx},function(e){n.DataSourceSelector=e.DataSourceSelector,n.FieldSelector=e.FieldSelector},function(e){i.SettingRow=e.SettingRow,i.SettingSection=e.SettingSection},function(e){s.useCallback=e.useCallback},function(e){a.Button=e.Button,a.TextArea=e.TextArea,a.TextInput=e.TextInput}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=o},972:e=>{"use strict";e.exports=s},321:e=>{"use strict";e.exports=a},89:e=>{"use strict";e.exports=n},298:e=>{"use strict";e.exports=i}},t={};function l(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,l),i.exports}l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var r={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(r),l.d(r,{__set_webpack_public_path__:()=>c,default:()=>a});var e=l(244),t=l(89),o=l(298),n=l(972),i=l(321);const s=({option:t,onUpdateOption:n,onRemoveOption:s})=>(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",alignItems:"flex-start"}},(0,e.jsx)("div",null,"Display Name"),(0,e.jsx)(o.SettingRow,null,(0,e.jsx)(i.TextInput,{value:t.displayName,onChange:e=>{n("displayName",e.target.value)}})),(0,e.jsx)("div",null,"SQL Expression (Use ","{}"," to express the field name)"),(0,e.jsx)(o.SettingRow,null,(0,e.jsx)(i.TextArea,{value:t.sqlExpression,onChange:e=>{n("sqlExpression",e.target.value)},htmlSize:100})),(0,e.jsx)(i.Button,{onClick:s},"Remove this option"));function a(a){const l=(0,e.Immutable)([e.AllDataSourceTypes.FeatureLayer]),r=(0,n.useCallback)((e=>{e&&a.onSettingChange({id:a.id,useDataSources:e,config:a.config.set("fieldNames",e.map((e=>"")))})}),[a]),c=(0,n.useCallback)(((e,t)=>{a.onSettingChange({id:a.id,config:a.config.set(e,t)})}),[a]),u=(0,n.useCallback)((()=>{const e=a.config.options?Array.from(a.config.options):[];e.push({displayName:"",value:"",sqlExpression:"{} = ''"}),c("options",e)}),[a,c]),p=(0,n.useCallback)(((e,t,o)=>{const n=a.config.options?Array.from(a.config.options):[];n[e][t]=o,c("options",n)}),[a,c]),d=(0,n.useCallback)((e=>{const t=a.config.options?Array.from(a.config.options):[];t.splice(e,1),c("options",t)}),[a,c]),g=(0,n.useCallback)(((e,t)=>{const o=a.config.fieldNames?Array.from(a.config.fieldNames):[];o.length>e&&(o[e]=t,c("fieldNames",o))}),[a.config.fieldNames,c]);return(0,e.jsx)("div",null,(0,e.jsx)("div",{className:"widget-setting-get-map-coordinates",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",gap:"10px"}},(0,e.jsx)(o.SettingSection,{className:"data-source-selector-section",title:"Select Data Source"},(0,e.jsx)(o.SettingRow,null,(0,e.jsx)(t.DataSourceSelector,{types:l,useDataSourcesEnabled:!0,mustUseDataSource:!0,useDataSources:a.useDataSources,onChange:r,widgetId:a.id,hideDataView:!0,isMultiple:!0}))),a.useDataSources&&a.useDataSources.length>0&&a.useDataSources.map(((n,i)=>(0,e.jsx)(o.SettingSection,{className:"field-selector-section",title:"Select Field for Data Source #"+i},(0,e.jsx)(o.SettingRow,{key:i},(0,e.jsx)(t.FieldSelector,{useDataSources:a.useDataSources.slice(i,i+1),selectedFields:a.config.fieldNames?(0,e.Immutable)([a.config.fieldNames[i]]):(0,e.Immutable)([]),onChange:e=>{e&&1===e.length&&g(i,e[0].name)},widgetId:a.id,useDropdown:!0,isMultiple:!1,useSelectionDataView:!1,isSearchInputHidden:!1,isDataSourceDropDownHidden:!0}))))),(0,e.jsx)(o.SettingSection,{title:"Placeholder"},(0,e.jsx)(o.SettingRow,null,(0,e.jsx)(i.TextInput,{value:a.config.placeholder,onChange:e=>{c("placeholder",e.target.value)}}))),a.config.options&&a.config.options.map(((t,n)=>(0,e.jsx)(o.SettingSection,{title:"Option #"+n,key:n},(0,e.jsx)(s,{key:n,option:t,onUpdateOption:(e,t)=>{p(n,e,t)},onRemoveOption:()=>{d(n)}})))),(0,e.jsx)(i.Button,{onClick:u},"Add Option")))}function c(e){l.p=e}})(),r})())}}}));