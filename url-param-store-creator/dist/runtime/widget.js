/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-core/react"],(function(e,t){var r={},n={};return Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){r.DataSourceManager=e.DataSourceManager,r.JimuFieldType=e.JimuFieldType,r.jsx=e.jsx},function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))}],execute:function(){e((()=>{var e={7154:(e,t,r)=>{"use strict";var n=r(8972);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useSyncExternalStore,u=n.useRef,a=n.useEffect,c=n.useMemo,s=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,l){var d=u(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c((function(){function e(e){if(!a){if(a=!0,o=e,e=n(e),void 0!==l&&f.hasValue){var t=f.value;if(l(t,e))return u=t}return u=e}if(t=u,i(o,e))return t;var r=n(e);return void 0!==l&&l(t,r)?t:(o=e,u=r)}var o,u,a=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,r,n,l]);var v=o(e,d[0],d[1]);return a((function(){f.hasValue=!0,f.value=v}),[v]),s(v),v}},8418:(e,t,r)=>{"use strict";e.exports=r(7154)},9244:e=>{"use strict";e.exports=r},8972:e=>{"use strict";e.exports=n}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var o={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(o),i.d(o,{__set_webpack_public_path__:()=>E,default:()=>_});var e=i(9244),t=i(8972),r=i(8418),n="default"in t?t.default:t,u=Symbol.for("react-redux-context"),a="undefined"!=typeof globalThis?globalThis:{};function c(){if(!n.createContext)return{};const e=a[u]??(a[u]=new Map);let t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}var s=c(),l=()=>{throw new Error("uSES not initialized!")};function d(e=s){return function(){return n.useContext(e)}}var f=d(),v=l,y=(e,t)=>e===t;function m(e=s){const t=e===s?f:d(e),r=(e,r={})=>{const{equalityFn:i=y,devModeChecks:o={}}="function"==typeof r?{equalityFn:r}:r;const{store:u,subscription:a,getServerState:c,stabilityCheck:s,identityFunctionCheck:l}=t(),d=(n.useRef(!0),n.useCallback({[e.name]:t=>e(t)}[e.name],[e,s,o.stabilityCheck])),f=v(a.addNestedSub,u.getState,c||u.getState,d,i);return n.useDebugValue(f),f};return Object.assign(r,{withTypes:()=>r}),r}var g=m();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var p=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),b="undefined"!=typeof navigator&&"ReactNative"===navigator.product;p||b?n.useLayoutEffect:n.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var S;S=r.useSyncExternalStoreWithSelector,v=S,(e=>{e})(t.useSyncExternalStore);var h=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function u(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}c((n=n.apply(e,t||[])).next())}))};const x=t=>t===e.JimuFieldType.Number?0:t===e.JimuFieldType.Date?(new Date).getUTCMilliseconds():"",O=t=>{const r=e.DataSourceManager.getInstance().getDataSource(t);return null!=r?r:void 0},F=(e,t)=>{var r;try{const n=null===(r=null==t?void 0:t.getSchema())||void 0===r?void 0:r.fields;if(n){for(const[,t]of Object.entries(n))if(t.alias===e)return[t.name,t.type];for(const[,t]of Object.entries(n))if(t.name===e)return[t.name,t.type]}return[void 0,void 0]}catch(e){return[void 0,void 0]}},w=e=>{let t=0;for(let r=0;r<e.length;r++)if(","===e[r]){if(1===t)return r}else"("===e[r]?t++:")"===e[r]&&t--;return-1},N=(t,r,n,i,o)=>h(void 0,void 0,void 0,(function*(){const u=parseFloat(t);if(!isNaN(u))return u;try{const u=t.substring(0,t.indexOf("("));if(["count","sum","min","max","avg","stddev","var","percentile_cont","percentile_disc"].includes(u)){const e=t.substring(t.indexOf("(")+1,t.indexOf(")")),n=void 0!==r?O(r[void 0!==o?o:0]):void 0;return yield((e,t,r)=>h(void 0,void 0,void 0,(function*(){const[n,i]=F(e,r);try{if(["count","sum","min","max","avg","stddev","var","percentile_cont","percentile_disc"].includes(t)){const e=(yield r.query({outStatistics:[{onStatisticField:n,outStatisticFieldName:"value",statisticType:t}]})).records[0].getFieldValue("value");return null==e?x(i):e}return console.error("Invalid aggregation function:",t),x(i)}catch(e){return console.error("Error fetching or aggregating data:",e),x(i)}})))(e,u,n)}return(e=>/^add\(.+\,.+\)$/.test(e)||/^sub\(.+\,.+\)$/.test(e)||/^mul\(.+\,.+\)$/.test(e)||/^div\(.+\,.+\)$/.test(e))(t)?yield((t,r,n,i,o)=>h(void 0,void 0,void 0,(function*(){try{const u=w(t),a=t.substring(0,t.indexOf("(")),c=t.substring(t.indexOf("(")+1,u),s=t.substring(u+1,t.length-1);let l=yield T(c,r,n,i,o),d=yield T(s,r,n,i,o);if("string"==typeof l&&(l=parseFloat(l)),"string"==typeof d&&(d=parseFloat(d)),isNaN(l)||isNaN(d))return x(e.JimuFieldType.Number);{let t=0;if("div"===a&&0===d)return x(e.JimuFieldType.Number);if("div"===a)t=l/d;else if("add"===a)t=l+d;else if("sub"===a)t=l-d;else{if("mul"!==a)return x(e.JimuFieldType.Number);t=l*d}return t}}catch(t){return console.error("Error dividing values:",t),x(e.JimuFieldType.Number)}})))(t,r,n,i,o):(e=>/^select\(.+\,.+\)$/.test(e))(t)?yield((t,r,n,i)=>h(void 0,void 0,void 0,(function*(){try{const o=w(t),u=parseFloat(t.substring(t.indexOf("(")+1,o));if(isNaN(u)||u<0||u>=r.length)return x(e.JimuFieldType.Number);const a=t.substring(o+1,t.length-1);return yield T(a,r,n,i,u)}catch(t){return console.error("Error selecting values:",t),x(e.JimuFieldType.Number)}})))(t,r,n,i):x(e.JimuFieldType.Number)}catch(t){return console.error("Error parsing function:",t),x(e.JimuFieldType.Number)}})),T=(t,r,n,i,o)=>h(void 0,void 0,void 0,(function*(){if((e=>/^.+\(.+\)$/.test(e))(t))return yield N(t,r,n,i,o);if((e=>/^\d+(\.\d+)?$/.test(e))(t))return parseFloat(t);try{const u=void 0!==r?O(r[void 0!==o?o:0]):void 0;return((t,r,n,i)=>{if(!r)return;let o=i?[i]:r.getSelectedRecords();const[u,a]=F(t,r);0===o.length&&(o=r.getRecords());try{if(!o||0===o.length||void 0===o[0]||null===o[0])return x(a);{const t=o[0].getFieldValue(u);if(null==t)return x(a);if(a!==e.JimuFieldType.Date)return a===e.JimuFieldType.Number?null!=t?t:x(a):t;{const e=new Date(t);if("toLocaleString"===n||void 0===n)return e.toLocaleString();if("toLocaleDateString"===n)return e.toLocaleDateString();if("toLocaleTimeString"===n)return e.toLocaleTimeString()}}}catch(e){return console.error("Error fetching data:",e),x(a)}})(t,u,n,i)}catch(t){return console.error("Error parsing function:",t),x(e.JimuFieldType.String)}})),j=(e,t,r,n,i,o,...u)=>h(void 0,[e,t,r,n,i,o,...u],void 0,(function*(e,t,r,n,i,o,u=!1,a){if(e.includes("[")&&e.includes("]")){const c=e.indexOf("["),s=e.indexOf("]"),l=e.substring(c+1,s),d=a?a[l]:void 0;return e.substring(0,c)+`${d}`+(yield j(e.substring(s+1),t,r,n,i,o,u,a))}if(e.includes("{")&&e.includes("}")){const a=e.indexOf("{"),c=e.indexOf("}"),s=yield T(e.substring(a+1,c),t,r,i);let l=`${s}`;return"number"!=typeof s||u||(l=s.toLocaleString(o,{minimumFractionDigits:n,maximumFractionDigits:n})),e.substring(0,a)+l+(yield j(e.substring(c+1),t,r,n,i))}return e}));function _(r){const[n,i]=(0,t.useState)(""),o=g((e=>e.urlParamStore.url_param_store)),u=(0,t.useCallback)((()=>{if(void 0===r.config.urlParamName||void 0===r.config.key)return void i("Please set the urlParamName and key in setting");const e=new URLSearchParams(window.location.search).get(r.config.urlParamName),t=r.config.mapping.find((t=>t.key===e)),n=void 0!==t?t.value:r.config.defaultValue;r.dispatch({type:"URL_PARAMS_SET_ACTION",key:r.config.key,val:n})}),[r]);return(0,t.useEffect)((()=>{u()}),[u]),(0,t.useEffect)((()=>{j(`v3: The value of ${r.config.key} is [${r.config.key}]`,void 0,void 0,void 0,void 0,void 0,!1,o).then((e=>{i(e)}))}),[o,r.config.key]),(0,e.jsx)("div",{className:"widget-demo jimu-widget m-2"},(0,e.jsx)("p",null,n))}function E(e){i.p=e}})(),o})())}}}));