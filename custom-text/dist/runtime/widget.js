System.register(["jimu-core","jimu-core/react"],(function(e,t){var n={},o={};return{setters:[function(e){n.DataSourceComponent=e.DataSourceComponent,n.DataSourceManager=e.DataSourceManager,n.JimuFieldType=e.JimuFieldType,n.css=e.css,n.jsx=e.jsx},function(e){o.default=e.default,o.useCallback=e.useCallback}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=n},972:e=>{"use strict";e.exports=o}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var i={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(i),r.d(i,{__set_webpack_public_path__:()=>f,default:()=>d});var e=r(244),t=r(972);function n(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const o=(e,t)=>{var n;const o=null===(n=null==t?void 0:t.getSchema())||void 0===n?void 0:n.fields;if(o)for(const[,t]of Object.entries(o))if(t.alias===e)return[t.name,t.type];return[void 0,void 0]},a=/^.+\(.+\)$/,u=(t,r,i,u)=>{if(a.test(t)){const e=t.substring(0,t.indexOf("("));return((e,t,r,i)=>{try{if(!r)return;const a=r.getRecords(),[u]=o(e,r),s=a.map((e=>e.getFieldValue(u))).filter((e=>"number"==typeof e||"count"===t));let c=0;return c="sum"===t?s.reduce(((e,t)=>e+t),0):"max"===t?Math.max(...s):"count"===t?s.length:"average"===t?s.reduce(((e,t)=>e+t),0)/s.length:"min"===t?Math.min(...s):void 0,void 0===c?void 0:void 0!==i?n(c,i).toFixed(i):c}catch(e){return void console.error("Error fetching or aggregating data:",e)}})(t.substring(t.indexOf("(")+1,t.indexOf(")")),e,r,u)}return((t,r,i,a)=>{if(!r)return;const u=r.getSelectedRecords();if(u&&0!==u.length){const[s,c]=o(t,r);if(c!==e.JimuFieldType.Date){if(c===e.JimuFieldType.Number){const e=u[0].getFieldValue(s);return void 0!==e&&void 0!==a?n(e,a).toFixed(a):e}return u[0].getFieldValue(s)}{const e=new Date(u[0].getFieldValue(s));if("toLocaleString"===i||void 0===i)return e.toLocaleString();if("toLocaleDateString"===i)return e.toLocaleDateString();if("toLocaleTimeString"===i)return e.toLocaleTimeString()}}})(t,r,i,u)},s=(e,t,n,o)=>{if(e.includes("{")&&e.includes("}")){const r=e.indexOf("{"),i=e.indexOf("}"),a=u(e.substring(r+1,i),t,n,o);return e.substring(0,r)+`${a}`+s(e.substring(i+1),t)}return e},c=t=>{const{fontSize:n,fontFamily:o,color:r,bold:i,italic:a,underline:u,strike:s}=t;return e.css`
    font-size: ${n};
    font-family: ${o};
    color: ${r};
    font-weight: ${i?"bold":"normal"};
    font-style: ${a?"italic":"normal"};
    text-decoration-line: ${u&&s?"underline line-through":u?"underline":s?"line-through":"none"};
    padding: 0;
  `},l=(n,o,r,i,a)=>{const u=[];let l=[];const d=n.map((e=>e.content));for(let f=0;f<d.length;f++){const g=d[f].split("\n");for(let d=0;d<g.length;d++)d>0&&l.length>0&&(u.push((0,e.jsx)("p",{key:u.length,style:{backgroundColor:"transparent",margin:0,textAlign:o}},l.map(((n,o)=>(0,e.jsx)(t.default.Fragment,{key:o},n))))),l=[]),l.push((0,e.jsx)("span",{key:`${f}-${d}`,css:c(n[f])},s(g[d],r,i,a)))}return l.length>0&&u.push((0,e.jsx)("p",{key:u.length,style:{backgroundColor:"transparent",margin:0}},l.map(((n,o)=>(0,e.jsx)(t.default.Fragment,{key:o},n))))),u};function d(n){const[o,r]=t.default.useState([]),i=(0,t.useCallback)((t=>{const n=e.DataSourceManager.getInstance();let o=t.useDataSources&&t.useDataSources.length>0?n.getDataSource(t.useDataSources[0].dataSourceId):void 0;if(null==o&&(o=void 0),void 0===t.config.lines||0===t.config.lines.length)r([(0,e.jsx)("div",{key:0},"No content")]);else{const e=l(Array.from(t.config.lines),t.config.alignItems||"start",o,t.config.dateTimeFormat,void 0!==t.config.numberRoundTo&&t.config.numberRoundTo>=0?t.config.numberRoundTo:void 0);r(e)}}),[]),a=(0,t.useCallback)((()=>{i(n)}),[n,i]);t.default.useEffect((()=>{a()}),[a]);const u=e.css`
    display: flex;
    flex-direction: column;
    justify-content: ${n.config.justifyContent||"start"};
    align-items: ${n.config.alignItems||"start"};
    width: 100%;
    height: 100%;
  `;return(0,e.jsx)(e.DataSourceComponent,{useDataSource:n.useDataSources[0],onDataSourceInfoChange:a,onDataSourceCreated:a},(0,e.jsx)("div",{css:u},o))}function f(e){r.p=e}})(),i})())}}}));