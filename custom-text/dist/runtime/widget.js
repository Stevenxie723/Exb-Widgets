System.register(["jimu-core","jimu-core/react"],(function(e,t){var n={},r={};return{setters:[function(e){n.DataSourceComponent=e.DataSourceComponent,n.DataSourceManager=e.DataSourceManager,n.JimuFieldType=e.JimuFieldType,n.css=e.css,n.jsx=e.jsx},function(e){r.default=e.default,r.useCallback=e.useCallback}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=n},972:e=>{"use strict";e.exports=r}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var i={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(i),o.d(i,{__set_webpack_public_path__:()=>g,default:()=>d});var e=o(244),t=o(972);function n(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const r=(e,t)=>{var n;const r=null===(n=null==t?void 0:t.getSchema())||void 0===n?void 0:n.fields;if(r)for(const[,t]of Object.entries(r))if(t.alias===e)return[t.name,t.type];return[void 0,void 0]},a=/^.+\(.+\)$/,u=(t,o,i,u,s)=>{if(a.test(t)){const e=t.substring(0,t.indexOf("("));return((e,t,o,i)=>{try{if(!o)return;const a=o.getRecords();if(!a||0===a.length||void 0===a[0]||null===a[0])return;const[u]=r(e,o),s=a.map((e=>e.getFieldValue(u))).filter((e=>"number"==typeof e||"count"===t));let c=0;return c="sum"===t?s.reduce(((e,t)=>e+t),0):"max"===t?Math.max(...s):"count"===t?s.length:"average"===t?s.reduce(((e,t)=>e+t),0)/s.length:"min"===t?Math.min(...s):void 0,void 0===c?void 0:void 0!==i?n(c,i).toFixed(i):c}catch(e){return void console.error("Error fetching or aggregating data:",e)}})(t.substring(t.indexOf("(")+1,t.indexOf(")")),e,o,u)}return((t,o,i,a,u)=>{if(!o)return;const s=u?[u]:o.getSelectedRecords();try{if(!s||0===s.length||void 0===s[0]||null===s[0])return;{const[u,c]=r(t,o);if(c!==e.JimuFieldType.Date){if(c===e.JimuFieldType.Number){const e=s[0].getFieldValue(u);return void 0!==e&&void 0!==a?n(e,a).toFixed(a):e}return s[0].getFieldValue(u)}{const e=new Date(s[0].getFieldValue(u));if("toLocaleString"===i||void 0===i)return e.toLocaleString();if("toLocaleDateString"===i)return e.toLocaleDateString();if("toLocaleTimeString"===i)return e.toLocaleTimeString()}}}catch(e){return void console.error("Error fetching data:",e)}})(t,o,i,u,s)},s=(e,t,n,r,o)=>{if(e.includes("{")&&e.includes("}")){const i=e.indexOf("{"),a=e.indexOf("}"),c=u(e.substring(i+1,a),t,n,r,o);return e.substring(0,i)+`${c}`+s(e.substring(a+1),t,n,r,o)}return e},c=t=>{const{fontSize:n,fontFamily:r,color:o,bold:i,italic:a,underline:u,strike:s}=t;return e.css`
    font-size: ${n};
    font-family: ${r};
    color: ${o};
    font-weight: ${i?"bold":"normal"};
    font-style: ${a?"italic":"normal"};
    text-decoration-line: ${u&&s?"underline line-through":u?"underline":s?"line-through":"none"};
    padding: 0;
  `},l=(n,r,o,i,a,u)=>{const l=[];let d=[];const g=n.map((e=>e.content));for(let f=0;f<g.length;f++){const m=g[f].split("\n");for(let g=0;g<m.length;g++)g>0&&d.length>0&&(l.push((0,e.jsx)("p",{key:l.length,style:{backgroundColor:"transparent",margin:0,textAlign:r}},d.map(((n,r)=>(0,e.jsx)(t.default.Fragment,{key:r},n))))),d=[]),d.push((0,e.jsx)("span",{key:`${f}-${g}`,css:c(n[f])},s(m[g],o,i,a,u)))}return d.length>0&&l.push((0,e.jsx)("p",{key:l.length,style:{backgroundColor:"transparent",margin:0}},d.map(((n,r)=>(0,e.jsx)(t.default.Fragment,{key:r},n))))),l};function d(n){const[r,o]=t.default.useState([]),i=(0,t.useCallback)((t=>{const n=e.DataSourceManager.getInstance();let r=t.useDataSources&&t.useDataSources.length>0?n.getDataSource(t.useDataSources[0].dataSourceId):void 0;if(null==r&&(r=void 0),void 0===t.config.lines||0===t.config.lines.length)o([(0,e.jsx)("div",{key:0},"No content")]);else{let e=t.repeatedDataSource?Array.isArray(t.repeatedDataSource)?void 0:t.repeatedDataSource.record:void 0;null==e&&(e=void 0);const n=l(Array.from(t.config.lines),t.config.alignItems||"start",r,t.config.dateTimeFormat,void 0!==t.config.numberRoundTo&&t.config.numberRoundTo>=0?t.config.numberRoundTo:void 0,e);o(n)}}),[]),a=(0,t.useCallback)((()=>{i(n)}),[n,i]);t.default.useEffect((()=>{a()}),[a]);const u=e.css`
    display: flex;
    flex-direction: column;
    justify-content: ${n.config.justifyContent||"start"};
    align-items: ${n.config.alignItems||"start"};
    width: 100%;
    height: 100%;
  `;return(0,e.jsx)(e.DataSourceComponent,{widgetId:n.id,useDataSource:n.useDataSources[0],onDataSourceInfoChange:a,onDataSourceCreated:a,onDataSourceSchemaChange:a},(0,e.jsx)("div",{css:u},r))}function g(e){o.p=e}})(),i})())}}}));