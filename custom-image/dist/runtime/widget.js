System.register(["jimu-core","jimu-core/react"],(function(e,t){var n={},r={};return{setters:[function(e){n.React=e.React,n.classNames=e.classNames,n.jsx=e.jsx},function(e){r.useCallback=e.useCallback,r.useEffect=e.useEffect,r.useState=e.useState}],execute:function(){e((()=>{var e={568:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.54.54 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.54.54 0 0 1 .738 0" clip-rule="evenodd"></path></svg>'},943:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0" clip-rule="evenodd"></path></svg>'},244:e=>{"use strict";e.exports=n},972:e=>{"use strict";e.exports=r}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var i={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(i),o.d(i,{__set_webpack_public_path__:()=>h,default:()=>y});var e=o(244),t=o(972),n=o(568),r=o.n(n),s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const a=t=>{const n=window.SVG,{className:o}=t,i=s(t,["className"]),a=(0,e.classNames)("jimu-icon jimu-icon-component",o);return n?e.React.createElement(n,Object.assign({className:a,src:r()},i)):e.React.createElement("svg",Object.assign({className:a},i))};var c=o(943),l=o.n(c),u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const f=t=>{const n=window.SVG,{className:r}=t,o=u(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:i,src:l()},o)):e.React.createElement("svg",Object.assign({className:i},o))};var p=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const d=({imgUrls:n,objectFit:r})=>{const[o,i]=(0,t.useState)(0),s=(0,t.useCallback)((()=>{i((o+1)%n.length)}),[o,n]),c=(0,t.useCallback)((()=>{i((o-1+n.length)%n.length)}),[o,n]);return 0===n.length?(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},"No image"):(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},(0,e.jsx)("img",{src:n[o],style:{width:"100%",height:"100%",objectFit:null!=r?r:"contain"}}),n.length>1&&0!==o&&(0,e.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"20%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:c},(0,e.jsx)("div",{style:{width:"100%",aspectRatio:1,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1e5,backgroundColor:"white",opacity:.5}},(0,e.jsx)(a,{size:"15px"}))),n.length>1&&o!==n.length-1&&(0,e.jsx)("div",{style:{position:"absolute",top:0,right:0,width:"20%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:s},(0,e.jsx)("div",{style:{width:"100%",aspectRatio:1,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:1e5,backgroundColor:"white",opacity:.5}},(0,e.jsx)(f,{size:"15px"}))))},g=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/x-icon"],m=(e,t)=>p(void 0,void 0,void 0,(function*(){if(void 0===e.url||null===e.url)return[];const n=`${e.url}/${t}/attachments?f=json`,r=yield fetch(n),o=yield r.json(),i=[];for(const n of o.attachmentInfos)n.contentType&&g.includes(n.contentType)&&i.push(`${e.url}/${t}/attachments/${n.attachmentid}`);return i}));function y(n){const[r,o]=(0,t.useState)([]),i=(0,t.useCallback)((()=>p(this,void 0,void 0,(function*(){if(Array.isArray(n.repeatedDataSource))return;const e=n.repeatedDataSource.record.dataSource;if(null==e)return;const t=n.repeatedDataSource.record.getId(),r=yield m(e,t);o(r)}))),[n.repeatedDataSource]);return(0,t.useEffect)((()=>{"attachment"===n.config.source?i():o([n.config.imgUrl])}),[i,n.config.imgUrl,n.config.source]),(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},(0,e.jsx)(d,{imgUrls:r,objectFit:n.config.objectFit}))}function h(e){o.p=e}})(),i})())}}}));