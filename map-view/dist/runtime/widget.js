System.register(["jimu-core","esri/views/MapView","esri/geometry/Extent","jimu-arcgis","jimu-core/react"],(function(e,t){var a={},r={},u={},n={},o={};return{setters:[function(e){a.DataSourceComponent=e.DataSourceComponent,a.DataSourceManager=e.DataSourceManager,a.React=e.React,a.jimuHistory=e.jimuHistory},function(e){r.default=e.default},function(e){u.default=e.default},function(e){n.MapViewManager=e.MapViewManager},function(e){o.useRef=e.useRef,o.useState=e.useState}],execute:function(){e((()=>{var e={3420:e=>{"use strict";e.exports=u},5231:e=>{"use strict";e.exports=r},2686:e=>{"use strict";e.exports=n},9244:e=>{"use strict";e.exports=a},8972:e=>{"use strict";e.exports=o}},t={};function i(a){var r=t[a];if(void 0!==r)return r.exports;var u=t[a]={exports:{}};return e[a](u,u.exports,i),u.exports}i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var c={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(c),i.d(c,{__set_webpack_public_path__:()=>o,default:()=>n});var e=i(9244),t=i(5231),a=i(3420),r=i(2686),u=i(8972);const n=n=>{const o=(0,u.useRef)(null),[i,c]=(0,u.useState)(),s=r.MapViewManager.getInstance(),[l,p]=(0,u.useState)(null);return n.useDataSources&&0!==n.useDataSources.length?e.React.createElement(e.DataSourceComponent,{useDataSource:n.useDataSources[0],onDataSourceCreated:r=>{var u;if(r&&!s.getJimuMapViewById(n.id)){const i={map:r.map,container:o.current};if(null===(u=n.queryObject)||void 0===u?void 0:u[n.id]){const e=n.queryObject[n.id].substr(7);let t;try{t=new a.default(JSON.parse(e))}catch(e){console.error("Bad extent URL parameter.")}t&&(i.extent=t)}s.createJimuMapView({mapWidgetId:n.id,view:new t.default(i),dataSourceId:r.id,isActive:!0,mapViewManager:s}).then((t=>{if(!l){const a=t.view.watch("extent",(t=>{e.jimuHistory.changeQueryObject({[n.id]:`extent=${JSON.stringify(t.toJSON())}`})}));p(a)}}))}}},e.React.createElement("div",{className:"widget-map",style:{width:"100%",height:"90%"},ref:o}),e.React.createElement("button",{type:"button",onClick:()=>{if(!n.useDataSources||0===n.useDataSources.length)return;const t=e.DataSourceManager.getInstance(),a=n.useDataSources[0],r=t.getDataSource(a.dataSourceId),u=Array.from(r.map.allLayers.map((e=>r.getDataSourceByLayer(e).id)))[2];c(u);t.getDataSource(u).updateQueryParams({where:"1 = 2"},n.id)}},null!=i?i:"Click me")):e.React.createElement("div",null,"Select a webmap in the settings panel")};function o(e){i.p=e}})(),c})())}}}));