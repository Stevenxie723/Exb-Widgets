System.register(["jimu-core","jimu-core/react","jimu-ui/basic/date-picker"],(function(e,t){var a={},n={},s={};return{setters:[function(e){a.DataSourceComponent=e.DataSourceComponent,a.DataSourceManager=e.DataSourceManager,a.jsx=e.jsx},function(e){n.useCallback=e.useCallback,n.useEffect=e.useEffect,n.useState=e.useState},function(e){s.DatePicker=e.DatePicker}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=a},972:e=>{"use strict";e.exports=n},938:e=>{"use strict";e.exports=s}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var o={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(o),r.d(o,{__set_webpack_public_path__:()=>l,default:()=>c});var e=r(244),t=r(972),a=r(938);const n=({useDataSources:a,children:n,onDataSourceInfoChange:s,onDataSourceCreated:r})=>{const o=(0,t.useCallback)((()=>{let t=n;for(let n=0;n<a.length;n++)t=(0,e.jsx)(e.DataSourceComponent,{useDataSource:a[n],onDataSourceInfoChange:s,onDataSourceCreated:r},t);return t}),[n,s,r,a]),[i,u]=(0,t.useState)(null);return(0,t.useEffect)((()=>{a&&a.length>0?u(o()):u(n)}),[n,o,a]),i},s={chooseStartDateLabel:"\u9078\u64c7\u8d77\u59cb\u65e5\u671f",chooseEndDateLabel:"\u9078\u64c7\u7d50\u675f\u65e5\u671f",toLabel:"~"},i=(e,t)=>{const a=new Date(e);return t?a.setHours(0,0,0,0):a.setHours(23,59,59,999),a.getTime()},u=({setDate:t,title:n,defaultDate:s})=>(0,e.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"start",padding:"10px",flexDirection:"column"}},(0,e.jsx)(a.DatePicker,{style:{width:"100%"},runtime:!0,"aria-label":"DateTime start-date picker label",format:"shortDate",isTimeLong:!0,onChange:e=>{"TODAY"==e?t(Date.now()):"YESTERDAY"==e?t(Math.max(Date.now()-864e5,0)):"number"==typeof e&&!isNaN(e)&&e>=0?t(e):t(Date.now())},selectedDate:void 0!==s?new Date(s):"TODAY",showDoneButton:!0,showQuickNavToToday:!0,strategy:"absolute",virtualDateList:["TODAY","YESTERDAY"]}));function c(a){const[r]=(0,t.useState)(Date.now()),[o,c]=(0,t.useState)({startDate:0,endDate:r}),l=(0,t.useCallback)(((t,n)=>{if(a.useDataSources&&0!==a.useDataSources.length&&void 0!==a.config.fieldNames&&a.useDataSources.length===a.config.fieldNames.length)for(let s=0;s<a.useDataSources.length;s++){const r=e.DataSourceManager.getInstance().getDataSource(a.useDataSources[s].dataSourceId);if(null==r||void 0===a.config.fieldNames[s])continue;const o={where:`${a.config.fieldNames[s]} >= '${new Date(t).toISOString()}' AND ${a.config.fieldNames[s]} <= '${new Date(n).toISOString()}'`};r.updateQueryParams(o,a.id)}}),[a.config.fieldNames,a.id,a.useDataSources]),D=(0,t.useCallback)((()=>{l(o.startDate,o.endDate)}),[o,l]),d=(0,t.useCallback)((e=>{c((t=>{const a=Object.assign(Object.assign({},t),{startDate:i(e,!0)});return l(a.startDate,a.endDate),a}))}),[l]),f=(0,t.useCallback)((e=>{c((t=>{const a=Object.assign(Object.assign({},t),{endDate:i(e,!1)});return l(a.startDate,a.endDate),a}))}),[l]);return(0,e.jsx)(n,{useDataSources:a.useDataSources,onDataSourceCreated:D},(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}},(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},(0,e.jsx)("div",{style:{width:"45%"}},(0,e.jsx)(u,{setDate:d,title:s.chooseStartDateLabel,defaultDate:o.startDate})),(0,e.jsx)("div",{style:{width:"5%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"transparent"}},(0,e.jsx)("div",{style:{fontFamily:"Avenir Next",fontSize:"20px",backgroundColor:"transparent"}},s.toLabel)),(0,e.jsx)("div",{style:{width:"45%"}},(0,e.jsx)(u,{setDate:f,title:s.chooseEndDateLabel,defaultDate:o.endDate})))))}function l(e){r.p=e}})(),o})())}}}));