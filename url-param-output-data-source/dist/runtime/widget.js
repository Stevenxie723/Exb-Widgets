System.register(["jimu-core","jimu-core/react"],(function(e,t){var a={},o={};return{setters:[function(e){a.DataSourceManager=e.DataSourceManager,a.DataSourceStatus=e.DataSourceStatus,a.jsx=e.jsx},function(e){o.useCallback=e.useCallback,o.useEffect=e.useEffect,o.useState=e.useState}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=a},972:e=>{"use strict";e.exports=o}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var u=t[a]={exports:{}};return e[a](u,u.exports,r),u.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var u={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(u),r.d(u,{__set_webpack_public_path__:()=>o,default:()=>a});var e=r(244),t=r(972);function a(a){var o;const[r,u]=(0,t.useState)(""),s=(0,t.useCallback)((()=>{var t;const o=e.DataSourceManager.getInstance().getDataSource(null===(t=a.outputDataSources)||void 0===t?void 0:t[0]);if(!o||void 0===a.config.urlParamName)return void u("Fail to create data. Reason: "+(o?void 0===a.config.urlParamName?"urlParamName not set":"isLoading is false":"Data source not created"));o.setStatus(e.DataSourceStatus.NotReady),o.setCountStatus(e.DataSourceStatus.NotReady);const r=new URLSearchParams(window.location.search).get(a.config.urlParamName),s=a.config.mapping.find((e=>e.key===r)),c=void 0!==s?s.value:a.config.defaultValue,n=o.buildRecord({attributes:{value:c}});o.setRecords([n]),o.setStatus(e.DataSourceStatus.Loaded),o.setCountStatus(e.DataSourceStatus.Loaded),o.selectRecords({records:[n],widgetId:a.widgetId}),o.getDataViews().forEach((e=>{var t;null===(t=e.setRecords)||void 0===t||t.call(e,[n]),e.selectRecords({records:[n],widgetId:a.widgetId})}))}),[a.outputDataSources,a.config.urlParamName,a.config.mapping,a.config.defaultValue,a.widgetId]);return(0,t.useEffect)((()=>{var t;(null===(t=a.outputDataSources)||void 0===t?void 0:t[0])&&e.DataSourceManager.getInstance().createDataSource(a.outputDataSources[0]).finally((()=>{s()}))}),[a.outputDataSources,s]),(0,e.jsx)("div",{className:"widget-demo jimu-widget m-2"},!(null===(o=a.outputDataSources)||void 0===o?void 0:o[0])&&(0,e.jsx)("h1",null,"Please set the output data source in setting"),r&&(0,e.jsx)("p",null,r))}function o(e){r.p=e}})(),u})())}}}));