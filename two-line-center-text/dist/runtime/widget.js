System.register(["jimu-core","jimu-core/react"],(function(e,t){var n={},i={};return{setters:[function(e){n.DataSourceComponent=e.DataSourceComponent,n.DataSourceManager=e.DataSourceManager,n.css=e.css,n.jsx=e.jsx},function(e){i.useCallback=e.useCallback,i.useEffect=e.useEffect,i.useState=e.useState}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=n},972:e=>{"use strict";e.exports=i}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var r={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(r),o.d(r,{__set_webpack_public_path__:()=>a,default:()=>s});var e=o(244),t=o(972),n=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function c(e){try{a(i.next(e))}catch(e){r(e)}}function s(e){try{a(i.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}a((i=i.apply(e,t||[])).next())}))};const i=(t,n,i,o,r,c,s)=>e.css`
    font-size: ${n};
    font-family: ${t};
    color: ${i};
    font-weight: ${o?"bold":"normal"};
    font-style: ${r?"italic":"normal"};
    text-decoration-line: ${c&&s?"underline line-through":c?"underline":s?"line-through":"none"};
    padding: 0;
  `,c=(e,t,i)=>n(void 0,void 0,void 0,(function*(){try{if(["count","sum","min","max","avg","stddev","var","percentile_cont","percentile_disc"].includes(t)){const[n]=((e,t)=>{var n;const i=null===(n=null==t?void 0:t.getSchema())||void 0===n?void 0:n.fields;if(i)for(const[,t]of Object.entries(i))if(t.alias===e)return[t.name,t.type];return[void 0,void 0]})(e,i);return(yield i.query({outStatistics:[{onStatisticField:n,outStatisticFieldName:"value",statisticType:t}]})).records[0].getFieldValue("value")}return void console.error("Invalid aggregation function:",t)}catch(e){return void console.error("Error fetching or aggregating data:",e)}}));function s(o){const r=(0,t.useCallback)(((t,i)=>n(this,void 0,void 0,(function*(){if(0===o.useDataSources.length)return;const n=e.DataSourceManager.getInstance().getDataSource(o.useDataSources[0].dataSourceId);return yield c(t,i,n)}))),[o]),s=e.css`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  `,a=i(o.config.firstLineFontFamily,o.config.firstLineFontSize,o.config.firstLineColor,o.config.firstLineBold,o.config.firstLineItalic,o.config.firstLineUnderline,o.config.firstLineStrike),u=i(o.config.secondLineFontFamily,o.config.secondLineFontSize,o.config.secondLineColor,o.config.secondLineBold,o.config.secondLineItalic,o.config.secondLineUnderline,o.config.secondLineStrike),[l,f]=(0,t.useState)(""),[d,g]=(0,t.useState)(""),v=(0,t.useCallback)((e=>n(this,void 0,void 0,(function*(){if(e.includes("{")&&e.includes("}")){const t=e.indexOf("{"),n=e.indexOf("}"),i=e.indexOf("(",t),o=e.indexOf(")",t),c=e.substring(t+1,i),s=e.substring(i+1,o),a=yield r(s,c);return e.substring(0,t)+a+(yield v(e.substring(n+1)))}return e}))),[r]),p=(0,t.useCallback)((()=>{v(o.config.firstLine).then((e=>{f(e)})),v(o.config.secondLine).then((e=>{g(e)}))}),[f,g,v,o]);return(0,t.useEffect)((()=>{p()}),[p]),o.useDataSources&&0!==o.useDataSources.length?(0,e.jsx)(e.DataSourceComponent,{useDataSource:o.useDataSources[0],onDataSourceInfoChange:p},(0,e.jsx)("div",{className:"widget-get-map-coordinates jimu-widget p-2",css:s},(0,e.jsx)("div",{style:{textAlign:"center",flexWrap:"wrap"}},(0,e.jsx)("div",{css:a},l),(0,e.jsx)("div",{css:u},d)))):(0,e.jsx)("div",{css:s},"Please configure the data source")}function a(e){o.p=e}})(),r})())}}}));