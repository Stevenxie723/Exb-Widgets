System.register(["jimu-core","jimu-core/react"],(function(e,t){var n={},o={};return{setters:[function(e){n.DataSourceComponent=e.DataSourceComponent,n.DataSourceManager=e.DataSourceManager,n.css=e.css,n.jsx=e.jsx},function(e){o.useCallback=e.useCallback,o.useEffect=e.useEffect,o.useState=e.useState}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=n},972:e=>{"use strict";e.exports=o}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var r={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(r),i.d(r,{__set_webpack_public_path__:()=>s,default:()=>o});var e=i(244),t=i(972);const n=(t,n,o,i,r,s,c)=>e.css`
    font-size: ${n};
    font-family: ${t};
    color: ${o};
    font-weight: ${i?"bold":"normal"};
    font-style: ${r?"italic":"normal"};
    text-decoration-line: ${s&&c?"underline line-through":s?"underline":c?"line-through":"none"};
    padding: 0;
  `;function o(o){const i=(0,t.useCallback)(((t,n)=>{var i;if(0===o.useDataSources.length)return;const r=e.DataSourceManager.getInstance().getDataSource(o.useDataSources[0].dataSourceId);try{const e=r.getRecords();let o;const s=null===(i=null==r?void 0:r.getSchema())||void 0===i?void 0:i.fields;if(s)for(const[,e]of Object.entries(s))e.alias===t&&(o=e.name);const c=e.map((e=>e.getFieldValue(o)));let a=0;return a="sum"===n?c.reduce(((e,t)=>e+t),0):"max"===n?Math.max(...c):"count"===n?c.length:"average"===n?c.reduce(((e,t)=>e+t),0)/c.length:"min"===n?Math.min(...c):void 0,a}catch(e){return void console.error("Error fetching or aggregating data:",e)}}),[o]),r=e.css`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  `,s=n(o.config.firstLineFontFamily,o.config.firstLineFontSize,o.config.firstLineColor,o.config.firstLineBold,o.config.firstLineItalic,o.config.firstLineUnderline,o.config.firstLineStrike),c=n(o.config.secondLineFontFamily,o.config.secondLineFontSize,o.config.secondLineColor,o.config.secondLineBold,o.config.secondLineItalic,o.config.secondLineUnderline,o.config.secondLineStrike),[a,u]=(0,t.useState)(""),[l,f]=(0,t.useState)(""),d=(0,t.useCallback)((e=>{if(e.includes("{")&&e.includes("}")){const t=e.indexOf("{"),n=e.indexOf("}"),o=e.indexOf("(",t),r=e.indexOf(")",t),s=e.substring(t+1,o),c=e.substring(o+1,r),a=i(c,s);return e.substring(0,t)+a+d(e.substring(n+1))}return e}),[i]),g=(0,t.useCallback)((()=>{u(d(o.config.firstLine)),f(d(o.config.secondLine))}),[u,f,d,o]);return(0,t.useEffect)((()=>{g()}),[g]),(0,e.jsx)(e.DataSourceComponent,{useDataSource:o.useDataSources[0],onDataSourceInfoChange:g},(0,e.jsx)("div",{className:"widget-get-map-coordinates jimu-widget p-2",css:r},(0,e.jsx)("div",{style:{textAlign:"center",flexWrap:"wrap"}},(0,e.jsx)("div",{css:s},a),(0,e.jsx)("div",{css:c},l))))}function s(e){i.p=e}})(),r})())}}}));